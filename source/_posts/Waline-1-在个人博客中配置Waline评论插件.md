---
title: Waline-1-åœ¨ä¸ªäººåšå®¢ä¸­é…ç½®Walineè¯„è®ºæ’ä»¶
date: 2023-08-20 18:38:24
index_img: /img/page/waline_about/home.png
excerpt: Walineæ˜¯ä¸€æ¬¾åŸºäºValineè¡ç”Ÿçš„ç®€æ´ã€å®‰å…¨çš„è¯„è®ºç³»ç»Ÿï¼Œæœ¬æ–‡ä¸»è¦è®°å½•å¦‚ä½•åœ¨è‡ªå·±çš„åšå®¢ç³»ç»Ÿä¸­å¼•å…¥è¯„è®ºæ’ä»¶ã€‚
tags: [Webå‰ç«¯, ä¸­é—´ä»¶, Waline]
categories: 
  - [ä¸­é—´ä»¶, Waline]
  - [Webå‰ç«¯, Waline]
  - [Hexo, Waline]
---

> Walineæ˜¯ä¸€æ¬¾åŸºäºValineè¡ç”Ÿçš„ç®€æ´ã€å®‰å…¨çš„è¯„è®ºç³»ç»Ÿï¼Œæœ¬æ–‡ä¸»è¦è®°å½•å¦‚ä½•åœ¨è‡ªå·±çš„åšå®¢ç³»ç»Ÿä¸­å¼•å…¥æ”¹è¯„è®ºæ’ä»¶ã€‚

## ç®€ä»‹

Waline æ˜¯ä¸€æ¬¾åŸºäº Valine è¡ç”Ÿçš„ç®€æ´ã€å®‰å…¨çš„è¯„è®ºç³»ç»Ÿã€‚

- å®˜ç½‘é“¾æ¥ï¼šhttps://waline.js.org/
- ç›¸å¯¹äº Valine æœ‰ä¸€äº›åå¤©çš„ä¼˜åŠ¿ï¼š

| ä¼˜åŠ¿         | æè¿°                                                    |
| ------------ | ------------------------------------------------------- |
| è‡ªç”±è¯„è®º     | å®Œå…¨çš„ Markdown æ”¯æŒï¼ŒåŒæ—¶åŒ…å«è¡¨æƒ…ã€æ•°å­¦å…¬å¼ã€HTML åµŒå…¥ |
| è½»é‡         | 54kB gzip çš„å®Œæ•´å®¢æˆ·ç«¯å¤§å°                              |
| å¼ºå¤§çš„å®‰å…¨æ€§ | å†…å®¹æ ¡éªŒã€é˜²çŒæ°´ã€ä¿æŠ¤æ•æ„Ÿæ•°æ®ç­‰                        |
| ç™»å½•æ”¯æŒ     | åœ¨å…è®¸åŒ¿åè¯„è®ºçš„åŸºç¡€ä¸Šï¼Œæ”¯æŒè´¦å·æ³¨å†Œï¼Œä¿æŒèº«ä»½          |
| å®Œå…¨å…è´¹éƒ¨ç½² | å¯å…è´¹éƒ¨ç½²åœ¨ Vercel ä¸Š                                  |
| æ˜“äºéƒ¨ç½²     | å¤šç§éƒ¨ç½²éƒ¨ç½²æ–¹å¼å’Œå­˜å‚¨æœåŠ¡æ”¯æŒ                          |



## LeanCloud è®¾ç½® (æ•°æ®åº“)

1. [ç™»å½•](https://console.leancloud.app/login) æˆ– [æ³¨å†Œ](https://console.leancloud.app/register) `LeanCloud å›½é™…ç‰ˆ` å¹¶è¿›å…¥ [æ§åˆ¶å°](https://console.leancloud.app/apps)
2. ç‚¹å‡»å·¦ä¸Šè§’ [åˆ›å»ºåº”ç”¨](https://console.leancloud.app/apps) å¹¶èµ·ä¸€ä¸ªä½ å–œæ¬¢çš„åå­— (è¯·é€‰æ‹©å…è´¹çš„å¼€å‘ç‰ˆ):

![](/img/page/2023/08/20/leancloud-1.png)

3. è¿›å…¥åº”ç”¨ï¼Œé€‰æ‹©å·¦ä¸‹è§’çš„ `è®¾ç½®` > `åº”ç”¨ Key`ã€‚ä½ å¯ä»¥çœ‹åˆ°ä½ çš„ `APP ID`,`APP Key` å’Œ `Master Key`ã€‚è¯·è®°å½•å®ƒä»¬ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚

![](/img/page/2023/08/20/leancloud-2.png)

{% note warning %}

**å›½å†…ç‰ˆéœ€è¦å®Œæˆå¤‡æ¡ˆæ¥å…¥**

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Leancloud å›½å†…ç‰ˆ ([leancloud.cnopen in new window](https://leancloud.cn/))ï¼Œæˆ‘ä»¬æ¨èä½ åˆ‡æ¢åˆ°å›½é™…ç‰ˆ ([leancloud.appopen in new window](https://leancloud.app/))ã€‚å¦åˆ™ï¼Œä½ éœ€è¦ä¸ºåº”ç”¨é¢å¤–ç»‘å®š**å·²å¤‡æ¡ˆ**çš„åŸŸåï¼ŒåŒæ—¶è´­ä¹°ç‹¬ç«‹ IP å¹¶å®Œæˆå¤‡æ¡ˆæ¥å…¥:

- ç™»å½•å›½å†…ç‰ˆå¹¶è¿›å…¥éœ€è¦ä½¿ç”¨çš„åº”ç”¨
- é€‰æ‹© `è®¾ç½®` > `åŸŸåç»‘å®š` > `API è®¿é—®åŸŸå` > `ç»‘å®šæ–°åŸŸå` > è¾“å…¥åŸŸå > `ç¡®å®š`ã€‚
- æŒ‰ç…§é¡µé¢ä¸Šçš„æç¤ºæŒ‰è¦æ±‚åœ¨ DNS ä¸Šå®Œæˆ CNAME è§£æã€‚
- è´­ä¹°ç‹¬ç«‹ IP å¹¶æäº¤å·¥å•å®Œæˆå¤‡æ¡ˆæ¥å…¥ã€‚(ç‹¬ç«‹ IP ç›®å‰ä»·æ ¼ä¸º ï¿¥ 50/ä¸ª/æœˆ)

![](/img/page/2023/08/20/leancloud-3.png)

{% endnote %}



## Vercel éƒ¨ç½² (æœåŠ¡ç«¯)

<p align><a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample"><img src="/img/page/2023/08/20/vercel-1.svg"></a></p>

1. ç‚¹å‡»ä¸Šæ–¹ `Deploy` æŒ‰é’®ï¼Œè·³è½¬è‡³ Vercel è¿›è¡Œ Server ç«¯éƒ¨ç½²ã€‚
2. å¦‚æœä½ æœªç™»å½•çš„è¯ï¼ŒVercel ä¼šè®©ä½ æ³¨å†Œæˆ–ç™»å½•ï¼Œè¯·ä½¿ç”¨ GitHub è´¦æˆ·è¿›è¡Œå¿«æ·ç™»å½•ã€‚
3. è¾“å…¥ä¸€ä¸ªä½ å–œæ¬¢çš„ Vercel é¡¹ç›®åç§°å¹¶ç‚¹å‡» `Create` ç»§ç»­:

![](/img/page/2023/08/20/vercel-2.png)

4. æ­¤æ—¶ Vercel ä¼šåŸºäº Waline æ¨¡æ¿å¸®åŠ©ä½ æ–°å»ºå¹¶åˆå§‹åŒ–ä»“åº“ï¼Œä»“åº“åä¸ºä½ ä¹‹å‰è¾“å…¥çš„é¡¹ç›®åã€‚

![](/img/page/2023/08/20/vercel-3.png)

ä¸€ä¸¤åˆ†é’Ÿåï¼Œæ»¡å±çš„çƒŸèŠ±ä¼šåº†ç¥ä½ éƒ¨ç½²æˆåŠŸã€‚æ­¤æ—¶ç‚¹å‡» `Go to Dashboard` å¯ä»¥è·³è½¬åˆ°åº”ç”¨çš„æ§åˆ¶å°ã€‚

![](/img/page/2023/08/20/vercel-4.png)

5. ç‚¹å‡»é¡¶éƒ¨çš„ `Settings` - `Environment Variables` è¿›å…¥ç¯å¢ƒå˜é‡é…ç½®é¡µï¼Œå¹¶é…ç½®ä¸‰ä¸ªç¯å¢ƒå˜é‡ `LEAN_ID`, `LEAN_KEY` å’Œ `LEAN_MASTER_KEY` ã€‚å®ƒä»¬çš„å€¼åˆ†åˆ«å¯¹åº”ä¸Šä¸€æ­¥åœ¨ LeanCloud ä¸­è·å¾—çš„ `APP ID`, `APP KEY`, `Master Key`ã€‚

![](/img/page/2023/08/20/vercel-5.png)

{% note warning %}

å¦‚æœä½ ä½¿ç”¨ LeanCloud å›½å†…ç‰ˆï¼Œè¯·é¢å¤–é…ç½® `LEAN_SERVER` ç¯å¢ƒå˜é‡ï¼Œå€¼ä¸ºä½ ç»‘å®šå¥½çš„åŸŸåã€‚

{% endnote %}

6. ç¯å¢ƒå˜é‡é…ç½®å®Œæˆä¹‹åç‚¹å‡»é¡¶éƒ¨çš„ `Deployments` ç‚¹å‡»é¡¶éƒ¨æœ€æ–°çš„ä¸€æ¬¡éƒ¨ç½²å³ä¾§çš„ `Redeploy` æŒ‰é’®è¿›è¡Œé‡æ–°éƒ¨ç½²ã€‚è¯¥æ­¥éª¤æ˜¯ä¸ºäº†è®©åˆšæ‰è®¾ç½®çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚

![](/img/page/2023/08/20/vercel-6.png)

7. æ­¤æ—¶ä¼šè·³è½¬åˆ° `Overview` ç•Œé¢å¼€å§‹éƒ¨ç½²ï¼Œç­‰å¾…ç‰‡åˆ»å `STATUS` ä¼šå˜æˆ `Ready`ã€‚æ­¤æ—¶è¯·ç‚¹å‡» `Visit` ï¼Œå³å¯è·³è½¬åˆ°éƒ¨ç½²å¥½çš„ç½‘ç«™åœ°å€ï¼Œæ­¤åœ°å€å³ä¸ºä½ çš„æœåŠ¡ç«¯åœ°å€ã€‚

![](/img/page/2023/08/20/vercel-7.png)



## ä»HTMLå¼•å…¥(å®¢æˆ·ç«¯)

åœ¨ä½ çš„ç½‘é¡µä¸­è¿›è¡Œå¦‚ä¸‹è®¾ç½®:

1. ä½¿ç”¨ CDN å¼•å…¥ Waline: `//cdn.jsdelivr.net/npm/@waline/client`ã€‚
2. åˆ›å»º `<script>` æ ‡ç­¾ä½¿ç”¨ Waline() å‡½æ•°åˆå§‹åŒ–ï¼Œå¹¶ä¼ å…¥å¿…è¦çš„ `el` ä¸ `serverURL` é€‰é¡¹ã€‚
   - `el` é€‰é¡¹æ˜¯ Waline æ¸²æŸ“ä½¿ç”¨çš„å…ƒç´ ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„ CSS é€‰æ‹©å™¨æˆ–è€…ä¸€ä¸ª HTMLElement å¯¹è±¡ã€‚
   - `serverURL` æ˜¯æœåŠ¡ç«¯çš„åœ°å€ï¼Œå³ä¸Šä¸€æ­¥è·å–åˆ°çš„å€¼ã€‚

```html
<head>
  ..
  <script src="//cdn.jsdelivr.net/npm/@waline/client"></script>
  ...
</head>
<body>
  ...
  <div id="waline"></div>
  <script>
    Waline({
      el: '#waline',
      serverURL: 'https://your-domain.vercel.app',
    });
  </script>
</body>
```

3. è¯„è®ºæœåŠ¡æ­¤æ—¶å°±ä¼šåœ¨ä½ çš„ç½‘ç«™ä¸ŠæˆåŠŸè¿è¡Œ ğŸ‰ã€‚



## Fluid ä¸»é¢˜å¼•å…¥(å®¢æˆ·ç«¯)

1. è®¾ç½®ä¸»é¢˜é…ç½®æ–‡ä»¶ `comments -> type` å€¼ä¸º `waline`

```yaml
# è¯„è®ºæ’ä»¶
# Comment plugin
comments:
	enable: true
	# æŒ‡å®šçš„æ’ä»¶ï¼Œéœ€è¦åŒæ—¶è®¾ç½®å¯¹åº”æ’ä»¶çš„å¿…è¦å‚æ•°
	# The specified plugin needs to set the necessary parameters at the same time
	# Options: utterances | disqus | gitalk | valine | waline | changyan | livere | remark42 | twikoo | cusdis
	type: waline

```

2. é…ç½® waline ç›¸å…³ä¿¡æ¯

```yaml
# Waline
# ä» Valine è¡ç”Ÿè€Œæ¥ï¼Œé¢å¤–å¢åŠ äº†æœåŠ¡ç«¯å’Œå¤šç§åŠŸèƒ½
# Derived from Valine, with self-hosted service and new features
# See: https://waline.js.org/
waline:
  serverURL: 'path-to-your-server-url'
  placeholder: é—æ†¾è«è¿‡äºéš¾å¿˜ä½ çš„èƒŒå½±ï¼Œå´æ‰¾ä¸åˆ°ä½ æ¥è¿‡çš„ç—•è¿¹ ...
  path: window.location.pathname
  avatar: retro
  meta: ['nick', 'mail', 'link']
  pageSize: 10
  lang: zh-CN
  highlight: true
  avatarCDN: ''
  avatarForce: false
  requiredFields: []
  emojiCDN:
  emojiMaps:
  anonymous:
```

{% note success %}

æœ€é‡è¦çš„æ˜¯å¡«å…¥ä¹‹å‰å¾—åˆ°çš„ **æœåŠ¡ç«¯åœ°å€** åˆ°`serverURL` ä¸­

{% endnote %}



## è¯„è®ºç®¡ç† (ç®¡ç†ç«¯)

1. éƒ¨ç½²å®Œæˆåï¼Œè¯·è®¿é—® `<serverURL>/ui/register` è¿›è¡Œæ³¨å†Œã€‚é¦–ä¸ªæ³¨å†Œçš„äººä¼šè¢«è®¾å®šæˆç®¡ç†å‘˜ã€‚
2. ç®¡ç†å‘˜ç™»é™†åï¼Œå³å¯çœ‹åˆ°è¯„è®ºç®¡ç†ç•Œé¢ã€‚åœ¨è¿™é‡Œå¯ä»¥ä¿®æ”¹ã€æ ‡è®°æˆ–åˆ é™¤è¯„è®ºã€‚
3. ç”¨æˆ·ä¹Ÿé€šè¿‡è¯„è®ºæ¡†æ³¨å†Œè´¦å·ï¼Œç™»é™†åä¼šè·³è½¬åˆ°è‡ªå·±çš„æ¡£æ¡ˆé¡µã€‚

